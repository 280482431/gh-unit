<!DOCTYPE HTML>
<html>
	<head>
		<meta http-equiv="Content-Type" content="html/html; charset=utf-8" />
		<title>guide_command_line Document</title>
		<meta id="xcode-display" name="xcode-display" content="render"/>
		<meta name="viewport" content="width=550" />
		<link rel="stylesheet" type="text/css" href="../../css/styles.css" media="all" />
		<link rel="stylesheet" type="text/css" media="print" href="../../css/stylesPrint.css" />	
		<meta name="generator" content="appledoc 2.0.4 (build 703)" />
	</head>
	<body>
		<header id="top_header">
			<div id="library" class="hideInXcode">
				<h1><a id="libraryTitle" href="../index.html">GHUnit </a></h1>
				<a id="developerHome" href="../index.html">GHUnit</a>
			</div>
			
			<div id="title" role="banner">
				<h1 class="hideInXcode" id="pageTitleHeader">guide_command_line Document</h1>
			</div>
			<ul id="headerButtons" role="toolbar"></ul>
		</header>
		<article>
			<a title="guide_command_line Document" name="top"></a>
			<div id="overview_contents" role="main">
				<div id="container">	
					<h2>Running from the Command Line</h2>

<p>To run the tests from the command line:</p>

<ul>
<li><p>Copy the <a href="http://github.com/gabriel/gh-unit/tree/master/Scripts/RunTests.sh">RunTests.sh</a> file into your project in the same directory as the xcodeproj file.</p></li>
<li><p>In the Tests target, Build Phases, Select Add Build Phase + button, and select Add Run Script.</p></li>
</ul>


<p><img src="images/cli_2_add_build_phase.png" alt="Add Build Phase" /></p>

<ul>
<li>For the script enter: <code>sh RunTests.sh</code></li>
</ul>


<p><img src="images/cli_3_configure_phase.png" alt="Configure Build Phase" /></p>

<p>The path to RunTests.sh should be relative to the xcode project file (.xcodeproj). You can uncheck &lsquo;Show environment variables in build log&rsquo; if you want.</p>

<p>Now run the tests From the command line:</p>

<pre><code>// For iOS app
GHUNIT_CLI=1 xcodebuild -target Tests -configuration Debug -sdk iphonesimulator build

// For mac app
GHUNIT_CLI=1 xcodebuild -target Tests -configuration Debug -sdk macosx build    
</code></pre>

<p>If you get and error like: <code>Couldn't register Tests with the bootstrap server.</code> it means an iPhone simulator is running and you need to close it.</p>

<h3>GHUNIT_CLI</h3>

<p>The RunTests.sh script will only run the tests if the env variable GHUNIT_CLI is set. This is why this RunScript phase is ignored when running the test GUI. This is how we use a single Test target for both the GUI and command line testing.</p>

<p>This may seem strange that we run via xcodebuild with a RunScript phase in order to work on the command line, but otherwise we may not have the environment settings or other Xcode specific configuration right.</p>

<h2>Makefile</h2>

<p>Follow the directions above for adding command line support.</p>

<p>Example Makefile&rsquo;s for Mac or iPhone apps:</p>

<ul>
<li><a href="http://github.com/gabriel/gh-unit/tree/master/Project/Makefile.example">Makefile (Mac OS X)</a></li>
<li><a href="http://github.com/gabriel/gh-unit/tree/master/Project-iOS/Makefile.example">Makefile (iOS)</a></li>
</ul>


<p>The script will return a non-zero exit code on test failure.</p>

<p>To run the tests via the Makefile:</p>

<pre><code>make test
</code></pre>

<h2>Running a Test Case</h2>

<p>The <code>TEST</code> environment variable can be used to run a single test or test case.</p>

<pre><code>// Run all tests in GHSlowTest
make test TEST="GHSlowTest"

// Run the method testSlowA in GHSlowTest   
make test TEST="GHSlowTest/testSlowA"
</code></pre>

<h2>GHUnit Environment Variables</h2>

<ul>
<li><code>TEST</code>: To run a specific test (from the command line). Use <code>TEST="GHSlowTest/testSlowA"</code> for a specific test or <code>TEST="GHSlowTest"</code> for a test case.</li>
<li><code>GHUNIT_RERAISE</code>: Default NO; If an exception is encountered it re-raises it allowing you to crash into the debugger</li>
<li><code>GHUNIT_AUTORUN</code>: Default NO; If YES, tests will start automatically</li>
<li><code>GHUNIT_AUTOEXIT</code>: Default NO; If YES, will exit upon test completion (no matter what). For command line MacOSX testing</li>
<li><code>GHUNIT_CLI</code>: Default NO; Specifies that the tests are being run from the command line. For command line MacOSX testing</li>
<li><code>WRITE_JUNIT_XML</code>: Default NO; Whether to write out JUnit XML output. For Jenkins CI integration</li>
</ul>

				</div>
				<div id="footer">
					<hr />
					<div class="footer-copyright">
						<p><span class="copyright">&copy; 2011 GHUnit. All rights reserved. (Last updated: 2011-10-27)</span><br />
						
						<span class="generator">Generated by <a href="http://appledoc.gentlebytes.com">appledoc 2.0.4 (build 703)</a>.</span></p>
						
					
					</div>
				</div>
			</div>
		</article>
	</body>
</html>